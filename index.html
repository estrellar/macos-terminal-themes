<!DOCTYPE html>
<html>
  <head>
    <title>Profiles</title>
    
    <script>!window.jQuery && document.write('<script src="http://code.jquery.com/jquery-1.4.2.min.js"><\/script><script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"><\/script>');</script>

                                                                                                                  
                                                                                                                  
 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
    <style>
      html, body {
          height: 100%;
      }
      
      .pin-top {
          position: relative;
      }
      
      
      .pin-bottom {
          position: relative;
      }
      
      
      .pinned {
          position: fixed !important;
      }
      
      .block {
          height: 100%;
      }
      
      .divider {
          height: 50px;
      }
    </style>
  </head>
  <body>
    
    <div id="profile-listing">
      
    </div> 
     <script>
      const { ipcRenderer }  = require('electron');
       var profiles = ipcRenderer.sendSync('index-loaded','');

       (function() {
           var listingEl = document.getElementById('profile-listing'); 
           var template = '<div id="{id}" class="block"><nav class="pushpin-demo-nav pinned" data-target="{id}" style="top: 0px;"><div class="nav-wrapper"><div class="container"><a class="brand-logo">{name}</a><ul id="nav-mobile" class="right hid-on-med-and-down"><li><a>install</a></li></ul></div></div></nav></div>';
           for(var i = 0; i < profiles.length; i++){
               prof = profiles[i];
               console.log(prof)
               torep = template.replace(/{id}/g, prof.name.replace(/[^a-z0-9\.]/gi, '-'))
                   .replace('{name}', prof.name);
               console.log(torep);
               listingEl.innerHTML += torep;
               
           }
           
           $('.pushpin-demo-nav').each(function() {
               var $this = $(this);
               var $target = $('#' + $(this).attr('data-target'));
               $this.pushpin({
                   top: $target.offset().top,
                   bottom: $target.offset().top + $target.outerHeight() - $this.height()
               });
           });
       })();
     </script>
    
  </body>
</html>
